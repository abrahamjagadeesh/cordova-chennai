function indexStationShortCode(r){var e=0;return arrayStationNames.forEach(function(n,t){return n.value===r?(e=t,void 0):void 0}),e}function whenNextTrain(r){var e,n=calcCurrentTime(),r=r,t=[],i=0,a=60*n.hour+n.minutes;e=r[0]<n.hour?60*(r[0]+24)+r[1]:60*r[0]+r[1];var u=e-a;if(u>59){var o=Math.floor(u/60),s=i+o;t[1]=u%60,t[0]=s>=24?s-24:s}else t[1]=u,t[0]=i;this.getNextTime=t,this.getInText=function(){var r=1===t[0]?" hour ":" hours ";return 0===t[1]?"Now":0!==t[0]?"in "+t[0]+r+t[1]+" Minutes":"in "+t[1]+" Minutes"}()}function startingTimeOfTrainsFromThisStation(r,e){var n=parseInt(r[1]),t=parseInt(r[0]),i=n+e,a=[];if(i>59){var u=Math.floor(i/60),o=t+u;a[1]=i%60,a[0]=o>=24?o-24:o}else a[1]=n+e,a[0]=t;return a}function calcCurrentTime(){var r={},e=new Date;return r.hour=e.getHours(),r.minutes=e.getMinutes(),r.day=e.getDay(),r}function trainsStopInThisStation(r,e,n,t){var a,u=calcCurrentTime(),o=[],s=!1;a="true"===n&&6===u.day||"false"===n&&0===u.day||t&&6===u.day?!0:!1;var h=data.filter(function(r){return a?"Su"==r.runday[0]||"Daily"==r.runday[0]:"M"==r.runday[0]||"Daily"==r.runday[0]});for(i=0;i<h.length;i++){var f=h[i],l=f.stations,m=f.timeDifferenceFromSource,T=f.actualtimeDifferenceFromSource,c=0,d=f.distance,v=0,M=f.startingTime,y=f.train,g=l.indexOf(r),x=l.indexOf(e);if(x>g&&g>=0&&x>=0){s=!0,timeTakentoReachHere=m[g];for(var S=g+1;x>=S;S++)c+=T[S];v=parseInt(d[x])-parseInt(d[g]);for(var I=0,N=M.length;N--;){var w=startingTimeOfTrainsFromThisStation(M[I],timeTakentoReachHere),p=[],D=w[0],P=w[1];p[0]=10>D?"0"+D:""+D,p[1]=10>P?"0"+P:""+P;var F={},C=0;"true"===n||t?(C=60*D+P,F.trainName=y,F.hoursMinutes=w,F.hoursMinutesZeroPadded=p,F.hoursPlusMins=C,F.totalJourneyTime=c+" Minutes",F.totalJourneyKM=v+"KM",F.fulltrainname=f.fulltrainname,F.thisStartingTIme=M[I],F.whenNextTrain=new whenNextTrain(w).getInText,o.push(F)):(D==u.hour&&P>=u.minutes||D>u.hour)&&(C=60*D+P,F.trainName=y,F.hoursMinutes=w,F.hoursMinutesZeroPadded=p,F.hoursPlusMins=C,F.totalJourneyTime=c+" Minutes",F.totalJourneyKM=v+"KM",F.fulltrainname=f.fulltrainname,F.thisStartingTIme=M[I],F.whenNextTrain=new whenNextTrain(w).getInText,o.push(F)),w=[],I++}}}o.sort(function(r,e){return r.hoursPlusMins-e.hoursPlusMins});for(var J=[],K=0;5>K;K++)void 0!==o[K]&&J.push(o[K]);return{isvalid:s,nextTrains:o,currentTrainArray:o[0],nextFiveTrainsArray:J}}